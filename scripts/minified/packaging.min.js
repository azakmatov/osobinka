(() => {
	const e = document.querySelectorAll(".reserve"),
		t = document.querySelectorAll(".payed"),
		r = (window.addEventListener("resize", () => {
			e.forEach(e => {
				document.body.clientWidth < 850 ? e.innerText = "Зарезервировано" : e.innerText = "Дизайн зарезервирован"
			}), t.forEach(e => {
				document.body.clientWidth < 850 ? e.innerText = "Выкуплено" : e.innerText = "Дизайн выкуплен"
			})
		}), document.querySelector(".main-link")),
		l = document.querySelector(".main-packaging-title");
	var s = document.querySelectorAll(".main-packaging-sidebar-item");
	const a = document.querySelectorAll(".main-packaging-sidebar-select");
	Array.from(a).forEach(e => {
		e.addEventListener("click", t => {
			t.target.classList.contains("other-product") ? (t.target.classList.add("active"), l.innerText = t.target.innerText, r.innerHTML = "", r.insertAdjacentHTML("beforeend", `<a href="../index.html">Главная</a><svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none"><path d="M1 1L5 5L1 9" stroke="#6F9114"/></svg><span style="color: #6F9114">Варианты упаковок</span><svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none"><path d="M1 1L5 5L1 9" stroke="#6F9114"/></svg><span style="color: #6F9114">${t.target.innerText}</span>`), t.target.classList.contains("active") && Array.from(a).forEach(e => e.classList.remove("selected"))) : t.target.classList.contains("active") ? (t.target.parentElement.style.background = "#FFFFFF", t.target.nextElementSibling.style.maxHeight = "0", t.target.nextElementSibling.style.zIndex = "-1", t.target.nextElementSibling.style.border = "none", t.target.classList.remove("active")) : (Array.from(a).forEach(e => {
				e.parentElement.style.background = "#FFFFFF", e.nextElementSibling && (e.nextElementSibling.style.maxHeight = "0", e.nextElementSibling.style.zIndex = "-1"), t.target.nextElementSibling.style.border = "none", e.classList.remove("active")
			}), t.target.parentElement.style.background = "#8FB32C", t.target.nextElementSibling.style.maxHeight = t.target.nextElementSibling.scrollHeight + "px", t.target.nextElementSibling.style.zIndex = "2", setTimeout(() => {
				t.target.nextElementSibling.style.border = "1px solid #8FB32C"
			}, 100), t.target.classList.add("active"))
		})
	}), Array.from(s).forEach(e => {
		e.addEventListener("click", n => {
			n.target.parentElement.style.maxHeight = "0", n.target.parentElement.style.zIndex = "-1", Array.from(a).find(s => {
				s.classList.contains("active") && setTimeout(() => {
					var e = s.innerText,
						t = (s.innerText = n.target.innerText, s.classList.remove("active"), s.parentElement.style.background = "#ffffff", s.nextElementSibling.style.border = "1px solid transparent", s);
					r.innerHTML = '<a href="../index.html">Главная</a>\n      <svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">\n        <path d="M1 1L5 5L1 9" stroke="#6F9114"/>\n      </svg>\n      <span style="color: #6F9114">Варианты упаковок</span>', Array.from(a).forEach(e => {
						e.classList.remove("selected")
					}), t.classList.add("selected"), e = `<svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">\\n' +
        '        <path d="M1 1L5 5L1 9" stroke="#6F9114"/>\\n' +
        '      </svg><span style="color: #6F9114">${e}</span> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">\\n' +
        '        <path d="M1 1L5 5L1 9" stroke="#6F9114"/>\\n' +
        '      </svg><span>${t.innerText}</span>`, r.insertAdjacentHTML("beforeend", e), l.innerText = t.innerText
				}, 200)
			})
		})
	});
	const n = document.querySelector(".filter-left-select"),
		i = document.querySelector(".filter-right-select"),
		ii = document.querySelector(".sorting-select"),
		o = document.querySelectorAll(".filter-left-item"),
		c = document.querySelectorAll(".filter-right-item"),
		cc = document.querySelectorAll(".sort-item"),
		d = (
			n.addEventListener("click", e => {
			e.target.nextElementSibling.classList.add("open"), Array.from(o).forEach(e => {
				e.classList.remove("active"), e.innerText === n.innerText && e.classList.add("active")
			})
		}), Array.from(o).forEach(t => {
			t.addEventListener("click", e => {
				n.innerText = t.innerText, e.target.parentElement.classList.remove("open"), "Все" !== e.target.innerText ? n.classList.add("not-default") : n.classList.remove("not-default")
			})
		}),
			ii.addEventListener("click", e => {
			e.target.nextElementSibling.classList.add("open"), Array.from(cc).forEach(e => {
				e.classList.remove("active"), e.innerText === ii.innerText && e.classList.add("active")
			})
		}), Array.from(cc).forEach(t => {
			t.addEventListener("click", e => {
				ii.innerText = t.innerText, e.target.parentElement.classList.remove("open"), "Сначала новые" !== e.target.innerText ? ii.classList.add("not-default") : ii.classList.remove("not-default")
			})
		}),

				i.addEventListener("click", e => {
			e.target.nextElementSibling.classList.add("open"), e.target.nextElementSibling.classList.add("open"), Array.from(c).forEach(e => {
				e.classList.remove("active"), e.innerText === i.innerText && e.classList.add("active")
			})
		}),
		// 		ii?.addEventListener("click", e => {
		// 	e.target.nextElementSibling.classList.add("open"), e.target.nextElementSibling.classList.add("open"), Array.from(cc).forEach(e => {
		// 		e.classList.remove("active"), e.innerText === ii.innerText && e.classList.add("active")
		// 	})
		// }),
				Array.from(c).forEach(t => {
			t.addEventListener("click", e => {
				i.innerText = t.innerText, e.target.parentElement.classList.remove("open"), "Сначала новые" !== e.target.innerText ? i.classList.add("not-default") : i.classList.remove("not-default")
			})
		}), document.querySelectorAll(".main-packaging-sidebar-select-wrap")),
		m = document.querySelectorAll(".main-packaging-sidebar-below"),
		g = document.querySelector(".main-packaging-sidebar"),
		L = (document.addEventListener("click", e => {
			f(g, e.target) || (Array.from(m).forEach(e => {
				e.style.maxHeight = "0", e.style.zIndex = "-1", e.style.border = "none"
			}), Array.from(a).forEach(e => {
				e.classList.remove("active")
			}), Array.from(d).forEach(e => {
				e.style.background = "#FFF"
			}))
		}), document.querySelector(".filter-left-select-wrap")),
		v = document.querySelector(".filter-left-below"),
		p = (document.addEventListener("click", e => {
			f(L, e.target) || v.classList.remove("open");
			if(e.target !== ii) {
				document.querySelector(".sort-below").classList.remove("open");
			}
		}),

			document.querySelector(".filter-right-select-wrap")),
		u = document.querySelector(".filter-right-below");
		uu = document.querySelector(".filter-right-below2");

	function f(e, t) {
		return !!e.contains(t) || (0 < (e = [...e.children]).length && e.map(e => {
			e.children && f(e, t)
		}), !1)
	}
	let pp = (document.addEventListener("click", e => {
		f(p, e.target) || u.classList.remove("open")
	}), document.querySelector(".filter-right-select-wrap2"));
    document.addEventListener("click", e => {
        if(pp){
            f(pp, e.target) || uu.classList.remove("open")
        }
	});
	const y = document.querySelector(".sidebar-over-select"),
		x = document.querySelector(".overAllWrap"),
		h = document.querySelectorAll(".sidebar-small-select"),
		E = document.querySelector(".background"),
		b = document.body,
		S = document.querySelector(".sidebar-small-other"),
		w = (S && (S.onclick = () => {
			l.innerText = S.innerText, S.classList.add("yet"), y.classList.remove("open"), h.forEach(e => {
				e.innerText = e.dataset.name, e.classList.remove("yet"), e.parentElement.classList.remove("open")
			}), E.classList.remove("visible"), b.classList.remove("no-scroll"), x.classList.remove("open")
		}), y && y.addEventListener("click", () => {
			y.classList.toggle("open"), E.classList.toggle("visible"), b.classList.toggle("no-scroll"), y.classList.contains("open") ? x.classList.add("open") : x.classList.remove("open")
		}), h && h.forEach(e => {
			e.addEventListener("click", e => {
				let t = e.target;
				t.classList.contains("open") ? (t.classList.remove("open"), t.nextElementSibling.classList.remove("open")) : (e = e.target.nextElementSibling.children, h.forEach(e => {
					e.classList.remove("open"), e.nextElementSibling.classList.remove("open")
				}), t.classList.add("open"), t.nextElementSibling.classList.add("open"), Array.from(e).forEach(e => {
					e.addEventListener("click", e => {
						t.innerText = e.target.innerText, l.innerText = e.target.innerText, l.style.textAlign = "left", S.classList.remove("yet"), e.target.parentElement.classList.remove("open"), t.classList.remove("open"), h.forEach(e => {
							e.classList.remove("yet")
						}), t.classList.add("yet"), y.classList.remove("open"), y.classList.add("selected"), E.classList.remove("visible"), b.classList.remove("no-scroll"), x.classList.remove("open")
					})
				}))
			})
		}), document.querySelector(".icon-filter")),
		T = document.querySelector(".icon-sort"),
		k = document.querySelector(".filter"),
		A = document.querySelector(".sort"),
		q = document.querySelectorAll(".filter-select"),
		F = document.querySelectorAll(".sort-select");
	w.onclick = () => {
		w.classList.remove("selected"), w.classList.contains("open") ? (w.classList.remove("open"), E.classList.remove("visible"), b.classList.remove("no-scroll"), k.classList.remove("open"), Array.from(q).some(e => e.classList.contains("selected") && e.hasAttribute("data-name")) || w.classList.add("selected")) : (w.classList.add("open"), E.classList.add("visible"), b.classList.add("no-scroll"), k.classList.add("open"), q.forEach(e => {
			e.addEventListener("click", e => {
				for (let e = 0; e < q.length; e++) q[e].classList.remove("selected");
				e.target.classList.add("selected"), w.classList.remove("open"), E.classList.remove("visible"), k.classList.remove("open"), "default" === e.target.dataset.name ? w.classList.remove("selected") : w.classList.add("selected"), b.classList.remove("no-scroll")
			})
		}))
	}, T.onclick = () => {
		T.classList.remove("selected"), T.classList.contains("open") ? (T.classList.remove("open"), E.classList.remove("visible"), b.classList.remove("no-scroll"), A.classList.remove("open"), Array.from(F).some(e => e.classList.contains("selected") && e.hasAttribute("data-name")) || T.classList.add("selected")) : (T.classList.add("open"), E.classList.add("visible"), b.classList.add("no-scroll"), A.classList.add("open"), F.forEach(e => {
			e.addEventListener("click", e => {
				for (let e = 0; e < F.length; e++) F[e].classList.remove("selected");
				e.target.classList.add("selected"), T.classList.remove("open"), E.classList.remove("visible"), A.classList.remove("open"), "default" === e.target.dataset.name ? T.classList.remove("selected") : T.classList.add("selected"), b.classList.remove("no-scroll")
			})
		}))
	};



	const arrElements = [
		document.querySelector('.sort'),
		document.querySelector('.sidebar-over-select'),
		document.querySelector('.icon-filter'),
		document.querySelector('.icon-sort'),
		document.querySelector('.icon-country-filter')
	];
	const container = document.querySelectorAll('.container');
	const filterCountry = document.querySelector('.filter-country');

	function solveBlur(arrOfEl, outIndex) {
		Array.from(arrOfEl).forEach(el =>{
			if(el.classList.contains('modal-is-opened')) {
				el.classList.remove('modal-is-opened');
			} else {
				el.classList.add('modal-is-opened');
			}
		});
		for(let i = 0; i<arrElements.length; i++) {
			if(i > 0) {
				if (i !== outIndex) {
					if (arrElements[i].classList.contains('modal-is-opened')) {
						arrElements[i].classList.remove('modal-is-opened');
						console.log('add (i): ' + i + '; outIndex='+ outIndex);
					}
					else if (outIndex > 0) {
						if(i!==3){
							arrElements[i].classList.add('modal-is-opened');
							// console.log('remove (i): ' + i + '; outIndex='+ outIndex)
						} else {
							arrElements[i].classList.add('modal-is-opened');
							// console.log('remove (i): ' + i + '; outIndex='+ outIndex)
						}
					}
				}
			}
		}
	}

// let burger = document.querySelectorAll('.burger');
// let iconFilter = document.querySelectorAll('.icon-filter');
// let iconSort = document.querySelectorAll('.icon-sort');
// let iconCountryFilter = document.querySelectorAll('.icon-country-filter');
// let sidebarOverSelect = document.querySelectorAll('.sidebar-over-select');
// 	let itemIndex = 0;
// 	arrElements.forEach(element => {
// 		element.addEventListener('click', ()=>{
// 			solveBlur(container, itemIndex);
// 			alert(itemIndex);
// 		});
// 		itemIndex++;
// 	});

		arrElements[0].addEventListener('click', ()=>{
			solveBlur(container, 0);
		});

		arrElements[1].addEventListener('click', ()=>{
			solveBlur(container, 1);
		});

		arrElements[2].addEventListener('click', ()=>{
			solveBlur(container, 2);
		});

		arrElements[3].addEventListener('click', ()=>{
			solveBlur(container, 3);
		});

		arrElements[4].addEventListener('click', ()=>{
			solveBlur(container, 4);
			if(filterCountry.classList.contains('open')) {
				filterCountry.classList.remove('open');
			} else {
				filterCountry.classList.add('open');
			}
			arrElements[4].classList.add('selected');
		});

		filterCountry.addEventListener('click', ()=>{
			arrElements[4].classList.add('selected');
		});


	new Swiper(".my-swiper", {
		spaceBetween: 10,
		direction: "horizontal",
		loop: !0,
		pagination: {
			el: ".btn-pgn"
		},
		navigation: {
			nextEl: ".go-right",
			prevEl: ".go-left"
		}
	})
})();
